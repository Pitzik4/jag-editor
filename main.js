!function(){"use strict";function e(e){if("undefined"==typeof Uint8Array){for(var r=[],t=0;t<e;++t)r.push(0);return r}return new Uint8Array(e)}function r(r){function t(){if(!n||r.width!==n.width||r.height!==n.height){n=f.createImageData(r.width,r.height);var t=n.data;o="undefined"!=typeof Uint8ClampedArray&&t.buffer?new Uint8Array(t.buffer,t.byteOffset):t;for(var h=3;h<o.length;h+=4)o[h]=255;i=r.width+7>>3,a&&a.length===i*r.height||(a=e(i*r.height))}}var n,o,a,i,f=r.getContext("2d",{alpha:!1});return{beginFrame:function(e,n){r.width!==e&&(r.width=e),r.height!==n&&(r.height=n),t()},commitFrame:function(){f.putImageData(n,0,0)},fillPolygon:function(e,r,t,f,h,u){r&=255,t&=255,f&=255,h|=0,h+=.5,u|=0,u+=.5;for(var l=0|n.width,s=0|n.height,v=l,c=0,g=s,p=0,d=0;d<e.length;++d)for(var m=e[d],b=0|m.length,y=m[b-2]+h,w=m[b-1]+u,k=0;k<b;k+=2){var x=m[k]+h,T=m[k+1]+u;x<v&&(v=x),x>c&&(c=x),T<g&&(g=T),T>p&&(p=T);var M,S,E,P=0|T,D=0|w;if(P>D)M=P,E=D,S=y;else{if(!(P<D)){y=x,w=T;continue}M=D,E=P,S=x}if(M>0){M>s&&(M=s);for(var W=(x-y)/(T-w);E<M;++E,S+=W)if(!(E<0)){var C=0|S;C>=l||(C<0&&(C=0),a[E*i+(C>>3)]^=1<<(7&C))}}y=x,w=T}v|=0,g|=0,c=0|Math.ceil(c),p=0|Math.ceil(p),v<0&&(v=0),g<0&&(g=0),c>=l?c=l-1:c<v&&(c=v),p>=s?p=s-1:p<g&&(p=g);for(var L=g;L<=p;++L)for(var I=0,q=-8&v,A=L*i+(q>>3),F=4*(L*l+q);q<=c;q+=8,++A,F+=32){var O=a[A];if(I||O){var U=q+7<=c?0:q+7-c,z=F;do{I^=1&O,I&&(o[z]=r,o[z+1]=t,o[z+2]=f),O>>=1,++U,z+=4}while(O||I&&U<8);a[A]=0}}},strokePolygon:function(e,r,t,a,i,f){r&=255,t&=255,a&=255,i|=0,f|=0;for(var h=0|n.width,u=0|n.height,l=0;l<e.length;++l)for(var s=e[l],v=0|s.length,c=s[v-2]+i,g=s[v-1]+f,p=0;p<v;p+=2){var d=s[p]+i,m=s[p+1]+f;if(Math.abs(m-g)>Math.abs(d-c))if(g>m){var b=0|g,y=d,w=0|m;if(b>0){b>u&&(b=u);for(var k=(d-c)/(m-g);w<b;++w,y+=k)if(!(w<0)){var x=0|y;if(!(x<0||x>=h)){var T=4*(w*h+x);o[T]=r,o[T+1]=t,o[T+2]=a}}}}else{var M=0|g,S=d,E=0|m;if(M<u-1){M<-1&&(M=-1);for(var P=(d-c)/(m-g);E>M;--E,S-=P)if(!(E>=u)){var D=0|S;if(!(D<0||D>=h)){var W=4*(E*h+D);o[W]=r,o[W+1]=t,o[W+2]=a}}}}else if(c>d){var C=0|c,L=0|d,I=m;if(C>0){C>h&&(C=h);for(var q=(m-g)/(d-c);L<C;++L,I+=q)if(!(L<0)){var A=0|I;if(!(A<0||A>=u)){var F=4*(A*h+L);o[F]=r,o[F+1]=t,o[F+2]=a}}}}else{var O=0|c,U=0|d,z=m;if(O<h-1){O<-1&&(O=-1);for(var H=(m-g)/(d-c);U>O;--U,z-=H)if(!(U>=h)){var N=0|z;if(!(N<0||N>=u)){var R=4*(N*h+U);o[R]=r,o[R+1]=t,o[R+2]=a}}}}c=d,g=m}},containsPoint:function(e,r,t,n,o){r-=0|n,t-=0|o;for(var a=!1,i=0;i<e.length;++i)for(var f=e[i],h=0|f.length,u=f[h-2],l=f[h-1],s=0;s<h;s+=2){var v=f[s],c=f[s+1],g=(v-u)/(c-l);t<c!=t<l&&r<v+(t-c)*g&&(a=!a),u=v,l=c}return a}}}function t(){return{id:++C,color:{r:0,g:0,b:0},subpaths:[],x:0,y:0}}function n(e){return{id:e.id,color:{r:e.color.r,g:e.color.g,b:e.color.b},subpaths:e.subpaths.map(function(e){return e.slice(0)}),x:e.x,y:e.y}}function o(e,r){r.color.r=e.color.r,r.color.g=e.color.g,r.color.b=e.color.b;var t=e.subpaths.length;if(r.subpaths.length>t)r.subpaths.length=t;else for(;t>r.subpaths.length;)r.subpaths.push([]);for(var n=0;n<t;++n){var o=e.subpaths[n],a=r.subpaths[n],i=o.length;a.length>i&&(a.length=i);for(var f=0;f<i;++f)a[f]=o[f]}r.x=e.x,r.y=e.y}function a(e,r,t){r.color.r+=e.color.r*t,r.color.g+=e.color.g*t,r.color.b+=e.color.b*t;var n=e.subpaths.length;if(r.subpaths.length!==n)throw Error("Non-matching path counts for addition!");for(var o=0;o<n;++o){var a=e.subpaths[o],i=r.subpaths[o],f=a.length;if(i.length!==f)throw Error("Non-matching point counts for addition!");for(var h=0;h<f;++h)i[h]+=a[h]*t}r.x+=e.x*t,r.y+=e.y*t}function i(e){e.color.r=0,e.color.g=0,e.color.b=0;for(var r=e.subpaths.length,t=0;t<r;++t)for(var n=e.subpaths[t],o=n.length,a=0;a<o;++a)n[a]=0;e.x=0,e.y=0}function f(){var e={r:256*Math.random()&255,g:256*Math.random()&255,b:256*Math.random()&255};return{color:e,cssColor:"rgb("+e.r+","+e.g+","+e.b+")",paths:[],pathDict:[],selection:"",type:"wholesale"}}function h(e){var r=e.map(function(e){return e.id});return r.sort(function(e,r){return e-r}),r.join(",")}function u(e){for(var r=f(),t=r.paths=e.map(n),o=0;o<t.length;++o)r.pathDict[t[o].id]=t[o];return r.selection=h(t),r.type="wholesale",r}function l(e,r){for(var t=f(),o=t.paths=e.map(n),i=0;i<o.length;++i){var u=o[i].id;t.pathDict[u]=o[i];for(var l=0;l<r.length;++l)if(r[l].id===u){a(r[l],o[i],-1);break}}return t.selection=h(o),t.type="cumulative",t}function s(e,r,t){void 0===t&&(t=1);for(var n=0;n<e.length;++n){var o=e[n],i=r.pathDict[o.id];i&&a(i,o,t)}}function v(e,r){for(var t=0;t<r.length;++t){var n=r[t],a=e.pathDict[n.id];a&&o(n,a)}}function c(e,r,t){return{x:e,y:r,keyframe:t}}function g(e,r){function a(e){return e+=s,e<0?e=0:e>=h.length&&(e=h.length-1),h[e]}function i(e,r){m=r;for(var t=a(r),n=0;n<e.length;++n)o(t[n],e[n])}function f(e){for(;e+s<0;)h.unshift(h[0].map(n));for(;e+s>=h.length;)h.push(h[h.length-1].map(n));return h[e+s]}r=r||[];var h=[e.map(n)],s=0,v=[],c=[],g=[],m=0,M=20,P=Date.now(),D=-1/0,W=-1/0;return{update:function(e,o,S,E,C,L,I,q){var A=this,F=Date.now();if(L){q||(r.length=0);for(var O=o.length-1;O>=0;--O)if(e.containsPoint(o[O].subpaths,S,E,o[O].x,o[O].y)){if(q){var U=r.indexOf(o[O]);-1===U?r.push(o[O]):r.splice(U,1)}else r.push(o[O]);break}}for(var z=r.length?r:o;I.length;){var H=I.pop().toLowerCase();if("g"===H){if(r.length)return p(A,r,S,E)}else if("m"===H){if(r.length)return d(A,r)}else{if("a"===H){if(!r.length){var N=t();r.push(N),o.push(N),N.color={r:256*Math.random()&255,g:256*Math.random()&255,b:256*Math.random()&255};for(var R=0;R<h.length;++R)h[R].push(n(N))}var _=r[r.length-1],j=o.indexOf(_);return b(A,_,function(e){_.subpaths.push(e);for(var r=0;r<h.length;++r)h[r][j].subpaths.push(e.slice(0))})}if("delete"===H)for(;r.length;){var B=r.pop(),J=o.indexOf(B);if(-1!==J){o.splice(J,1);for(var X=0;X<h.length;++X)h[X].splice(J,1)}}else{if("p"===H)return i(o,m),T(A,i,m,M);if("s"===H)return i(o,m),y(A,i,m);if("r"===H)return x(A,g,z,f,i,M,m);if("q"===H)v.push(l(z,a(m))),D=F+1e3;else if("w"===H)c.push(u(z)),D=F+1e3;else{if("k"===H)return w(A,c,v,g,z);if(" "===H)h.length=0,h[0]=o.map(n),m=0,s=0;else{if("t"===H)return k(A,g,z);if("+"===H||"="===H||"-"===H||"_"===H){var Y=(F-P)*M/1e3%2;"+"===H||"="===H?++M:"-"!==H&&"_"!==H||--M,P=F-1e3*Y/M,W=F+2e3}}}}}}},render:function(e,t){for(var n=0;n<r.length;++n)S(e,t,r[n]);var o=Date.now();if(o<D&&(E(e,t,v,-10),E(e,t,c,80)),o<W){var a=(o-P)*M/1e3%2;e.fillStyle=a<1?"white":"black",e.fillRect(0,0,5,5)}}}}function p(e,r,t,n){t|=0,n|=0;var o=r.map(function(e){return{x:e.x,y:e.y}}),a=o.map(function(e){var r=e.x,o=e.y;return{x:r-t,y:o-n}});return{update:function(t,n,i,f,h,u,l,s){if(i|=0,f|=0,u||l.some(function(e){return"g"===e.toLowerCase()}))return e;if(l.some(function(e){return" "===e||"Escape"===e})){for(var v=0;v<r.length;++v)r[v].x=o[v].x,r[v].y=o[v].y;return e}for(var c=0;c<r.length;++c)r[c].x=i+a[c].x,r[c].y=f+a[c].y},render:function(e,r){}}}function d(e,r){var t=r[0],n=0,o=0;return{update:function(a,i,f,h,u,l,s,v){if(s.some(function(e){return" "===e||"Escape"===e}))return e;for(var c=1/0,g=0;g<r.length;++g)for(var p=r[g],d=0|p.x,b=0|p.y,y=0;y<p.subpaths.length;++y)for(var w=p.subpaths[y],k=0|w.length,x=0;x<k;x+=2){var T=w[x]+d,M=w[x+1]+b,S=T-f,E=M-h,P=S*S+E*E;P<c&&(t=p,n=y,o=x>>1,c=P)}return u?m(e,t,n,o,f,h):void 0},render:function(e,a){for(var i=0;i<r.length;++i)S(e,a,r[i]);var f=0|t.x,h=0|t.y,u=2/a,l=t.subpaths[n][2*o]+f,s=t.subpaths[n][2*o+1]+h;e.beginPath(),e.moveTo(l-2*u,s-2*u),e.lineTo(l+2*u,s-2*u),e.lineTo(l+2*u,s+2*u),e.lineTo(l-2*u,s+2*u),e.lineTo(l-2*u,s-2*u),e.strokeStyle="black",e.lineWidth=2*u,e.stroke(),e.strokeStyle="white",e.lineWidth=1*u,e.stroke()}}}function m(e,r,t,n,o,a){var i=r.subpaths[t][2*n],f=r.subpaths[t][2*n+1],h=0|r.x,u=0|r.y,l=i-o,s=f-a,v=[i,f],c=!1;return{update:function(o,a,i,f,h,u,g,p){if(g.some(function(e){return" "===e||"Escape"===e}))return e;i+=l,f+=s;var d=v[v.length-2],m=v[v.length-1];if(Math.max(Math.abs(i-d),Math.abs(f-m))>=.1){var b=-1;if(c&&!h&&(b=function(e,n,o,a){o-=e,a-=n;for(var i=r.subpaths[t],f=0|i.length,h=i[f-2],u=i[f-1],l=0;l<f;l+=2){var s=i[l],v=i[l+1],c=s-h,g=v-u,p=((s-e)*g-(v-n)*c)/(o*g-a*c),d=((e-s)*a-(n-v)*o)/(c*a-g*o);if(p>=0&&p<1&&d>=0&&d<1)return l>>1;h=s,u=v}return-1}(d,m,i,f)),c=!0,-1!==b){var y=r.subpaths[t],w=0|y.length;v.push(r.subpaths[t][2*b],r.subpaths[t][2*b+1]);for(var k=0|v.length,x=0,T=2;T<k;T+=2){var S=v[T]-v[T-2],E=v[T+1]-v[T-1];x+=Math.sqrt(S*S+E*E)}for(var P=0,D=0,W=0,C=v.length;W<C;W+=2)P+=v[W],D+=v[W+1];P/=k>>1,D/=k>>1;for(var L=0,I=0,q=0,A=2*n;L+=y[A],I+=y[A+1],++q,A!==2*b;A=(A+2)%w);L/=q,I/=q;for(var F=0,O=0,U=0,z=2*b;F+=y[z],O+=y[z+1],++U,z!==2*n;z=(z+2)%w);F/=U,O/=U;var H=function(e,r,t){if(!(r<=1))for(var n=x/(r-1),o=0,a=2,i=2*t;a<k;a+=2){var f=v[a-2],h=v[a-1],u=v[a],l=v[a+1],s=u-f,c=l-h,g=Math.sqrt(s*s+c*c),p=s/g,d=c/g;if(g>n-o)for(f+=p*(n-o),h+=d*(n-o),g-=n-o,i=(i+2)%w,e[i]=f,e[i+1]=h,o=0;g>n;)f+=p*n,h+=d*n,g-=n,i=(i+2)%w,e[i]=f,e[i+1]=h;o+=g}},N=y.slice(0);H(y,q,n),function(){for(var e=0;e<k>>1;e+=2){var r=v[e],t=v[e+1];v[e]=v[k-e-2],v[e+1]=v[k-e-1],v[k-e-2]=r,v[k-e-1]=t}}(),H(N,U,b);var R=P-L,_=D-I,j=P-F,B=D-O;return j*j+B*B<R*R+_*_&&(r.subpaths[t]=N,N=y),M(e,"z",function(){var e=r.subpaths[t];r.subpaths[t]=N,N=e})}v.push(i,f)}},render:function(e,t){S(e,t,r);var n=2/t;e.beginPath(),e.moveTo(v[0]+h,v[1]+u);for(var o=2;o<v.length;o+=2)e.lineTo(v[o]+h,v[o+1]+u);e.strokeStyle="black",e.lineWidth=2*n,e.stroke(),e.strokeStyle="white",e.lineWidth=1*n,e.stroke()}}}function b(e,r,t){var n=[],o=!1,a=0|r.x,i=0|r.y;return{update:function(r,f,h,u,l,s,v,c){if(h-=a,u-=i,l){if(o){var g=n[n.length-2],p=n[n.length-1];Math.max(Math.abs(h-g),Math.abs(u-p))>=.1&&n.push(h,u)}else n.push(h,u);o=!0}else if(o){for(var d=0|n.length,m=0,b=0;b<d;b+=2){var y=n[b]-n[(b+d-2)%d],w=n[b+1]-n[(b+d-1)%d];m+=Math.sqrt(y*y+w*w)}for(var k=[],x=m/3600,T=0,M=0;M<d;M+=2){var S=n[(M+d-2)%d],E=n[(M+d-1)%d],P=n[M],D=n[M+1],W=P-S,C=D-E,L=Math.sqrt(W*W+C*C),I=W/L,q=C/L;if(L>x-T)for(S+=I*(x-T),E+=q*(x-T),L-=x-T,k.push(S,E),T=0;L>x;)S+=I*x,E+=q*x,L-=x,k.push(S,E);T+=L}return t(k),e}},render:function(e,t){S(e,t,r);var o=2/t;e.beginPath(),e.moveTo(n[0]+a,n[1]+i);for(var f=2;f<n.length;f+=2)e.lineTo(n[f]+a,n[f+1]+i);e.strokeStyle="black",e.lineWidth=2*o,e.stroke(),e.strokeStyle="white",e.lineWidth=1*o,e.stroke()}}}function y(e,r,t){return{update:function(n,o,a,i,f,h,u,l){for(;u.length;){var s=u.pop().toLowerCase();if("escape"===s||" "===s||"s"===s)return e;"arrowright"===s||"d"===s?r(o,++t):"arrowleft"!==s&&"a"!==s||r(o,--t)}},render:function(e,r){}}}function w(e,r,t,n,o){for(var a=[],f=0;f<o.length;++f)a[o[f].id]=!0;var l,v=h(o),g=r.filter(function(e){return e.selection===v}),p=t.filter(function(e){return e.selection===v}),d=n.filter(function(e){return e.keyframe.selection===v}),m=0,b=0,y=u(o);return{update:function(r,t,o,f,h,u,v,w){if(v.some(function(e){return" "===e||"Escape"===e||"k"===e}))return e;if(h)if(l)l.x=o+m,l.y=f+b;else{if(o>=80&&o<90&&f>=0&&f<2*g.length)l=c(o,f,g[f>>1]),m=b=0,d.push(l),n.push(l);else if(o>=-10&&o<0&&f>=0&&f<2*p.length)l=c(o,f,p[f>>1]),m=b=0,d.push(l),n.push(l);else for(var k=d.length-1;k>=0;--k){var x=d[k],T=x.x-o,M=x.y-f;if(T*T+M*M<=L*L){l=x,m=T,b=M;break}}if(l){for(var S=0;S<t.length;++S)a[t[S].id]&&i(t[S]);var E=l.keyframe;"cumulative"===E.type&&s(t,y,1),s(t,E,1)}}else if(l){if(l.x<0||l.x>=80){var P=n.indexOf(l);n.splice(P,1);var D=d.indexOf(l);d.splice(D,1)}l=void 0}},render:function(e,r){E(e,r,p,-10),E(e,r,g,80),P(e,r,d)}}}function k(e,r,t){for(var n=[],o=0;o<t.length;++o)n[t[o].id]=!0;for(var a=h(t),f=r.filter(function(e){return e.keyframe.selection===a}),l=[],v=0;v<f.length;++v)l.push(.5);var c=u(t);return{update:function(r,t,o,a,h,u,v,g){if(v.some(function(e){return" "===e||"Escape"===e||"t"===e}))return e;for(var p=0,d=0;d<f.length;++d){var m=f[d],b=m.x-o,y=m.y-a;p+=l[d]=1/Math.sqrt(b*b+y*y)}for(var w=0;w<t.length;++w)n[t[w].id]&&i(t[w]);if(p===p&&p!==1/0&&p!==-1/0)for(var k=0;k<f.length;++k){var x=f[k].keyframe;"cumulative"===x.type&&s(t,c,l[k]/p),s(t,x,l[k]/p)}else for(var T=0;T<f.length;++T)if(l[T]!==l[T]||l[T]===1/0||l[T]===-1/0){var M=f[T].keyframe;"cumulative"===M.type&&s(t,c,1),s(t,M,1)}},render:function(e,r){P(e,r,f)}}}function x(e,r,t,n,a,f,l){for(var c=[],g=0;g<t.length;++g)c[t[g].id]=!0;for(var p=h(t),d=r.filter(function(e){return e.keyframe.selection===p}),m=[],b=0;b<d.length;++b)m.push(.5);var y=u(t),w=Date.now(),k=l;return{update:function(r,t,h,u,g,p,b,x){if(b.some(function(e){return" "===e||"Escape"===e||"r"===e}))return e;var T=l;if((l=((Date.now()-w)*f/1e3|0)+k)!==T){for(var M=n(T),S=0;S<t.length;++S)o(t[S],M[S]);a(t,l),v(y,t)}for(var E=0,P=0;P<d.length;++P){var D=d[P],W=D.x-h,C=D.y-u;E+=m[P]=1/Math.sqrt(W*W+C*C)}for(var L=0;L<t.length;++L)c[t[L].id]&&i(t[L]);if(E===E&&E!==1/0&&E!==-1/0)for(var I=0;I<d.length;++I){var q=d[I].keyframe;"cumulative"===q.type&&s(t,y,m[I]/E),s(t,q,m[I]/E)}else for(var A=0;A<d.length;++A)if(m[A]!==m[A]||m[A]===1/0||m[A]===-1/0){var F=d[A].keyframe;"cumulative"===F.type&&s(t,y,1),s(t,F,1)}},render:function(e,r){P(e,r,d)}}}function T(e,r,t,n){var o=Date.now(),a=t;return{update:function(i,f,h,u,l,s,v,c){for(;v.length;){var g=v.pop().toLowerCase();if("escape"===g||" "===g||"s"===g)return e}var p=t;(t=((Date.now()-o)*n/1e3|0)+a)!==p&&r(f,t)},render:function(e,r){}}}function M(e,r,t){return r=r.toLowerCase(),{update:function(n,o,a,i,f,h,u,l){for(var s=u.length-1;s>=0;--s)u[s].toLowerCase()===r&&(u.splice(s,1),t&&t());return e.update(n,o,a,i,f,h,u,l)},render:function(r,t){e.render(r,t)}}}function S(e,r,t,n,o,a){function i(e,r){var n=t.subpaths[e],o=n.length>>1;return n[(r+o)%o*2]+h}function f(e,r){var n=t.subpaths[e],o=n.length>>1;return n[(r+o)%o*2+1]+u}o|=0,a|=0;var h=0|t.x,u=0|t.y,l=2/r;if(e.lineCap="round",e.lineJoin="round",e.beginPath(),n>=0){var s=0|t.subpaths[n].length;e.moveTo(i(n,a),f(n,a));for(var v=(a+1)%s;;v=(v+1)%s){var c=i(n,v),g=f(n,v);if(e.lineTo(c,g),v===o%s)break}}for(var p=0;p<t.subpaths.length;++p)if(p!==n){var d=0|t.subpaths[p].length;e.moveTo(i(p,-1),f(p,-1));for(var m=0;m<d;++m)e.lineTo(i(p,m),f(p,m))}if(e.strokeStyle="white",e.lineWidth=2*l,e.stroke(),e.strokeStyle="black",e.lineWidth=1*l,e.stroke(),n>=0){var b=0|t.subpaths[n].length;e.beginPath(),e.moveTo(i(n,o),f(n,o));for(var y=(o+1)%b;y!==(a+1)%b;y=(y+1)%b){var w=i(n,y),k=f(n,y);e.lineTo(w,k)}e.strokeStyle="black",e.lineWidth=2*l,e.stroke(),e.strokeStyle="white",e.lineWidth=1*l,e.stroke()}}function E(e,r,t,n){for(var o=0;o<t.length;++o)e.fillStyle=t[o].cssColor,e.beginPath(),e.moveTo(n,2*o),e.lineTo(n+10,2*o),e.lineTo(n+10,2*o+1.9),e.lineTo(n,2*o+1.9),e.lineTo(n,2*o),e.fill()}function P(e,r,t){for(var n=2/r,o=0;o<t.length;++o){var a=t[o];e.beginPath(),e.moveTo(a.x+L,a.y),e.arc(a.x,a.y,L,0,2*Math.PI,!0),e.fillStyle=a.keyframe.cssColor,e.fill(),e.strokeStyle="black",e.lineWidth=2*n,e.stroke(),e.strokeStyle="white",e.lineWidth=1*n,e.stroke()}}var D="undefined"!=typeof performance&&void 0!==performance.now?function(){return performance.now()}:function(){return Date.now()},W="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){setTimeout(function(){return e(D())},16)},C=0,L=1;window.begin=function(){function e(r){a.width!==window.innerWidth&&(a.width=window.innerWidth),a.height!==window.innerHeight&&(a.height=window.innerHeight);var t=a.height/n.height,u=(p-.5*(a.width-n.width*t))/t,g=d/t,k=m,x=b,T=y;b=!1;for(var M=w.length-1;M>=0;--M)"l"===w[M].toLowerCase()&&(w.splice(M,1),s=!s);do{var S=l.update(o,h,u,g,k,x,w,T);S&&(l=S),w.length=0,x=!1}while(S);o.beginFrame(v,c),o.fillPolygon(f,0,0,0);for(var E=0,P=h.length;E<P;++E)o.fillPolygon(h[E].subpaths,h[E].color.r,h[E].color.g,h[E].color.b,h[E].x,h[E].y);if(o.commitFrame(),i.setTransform(1,0,0,1,0,0),i.fillStyle="black",i.fillRect(0,0,a.width,a.height),i.mozImageSmoothingEnabled=!1,i.webkitImageSmoothingEnabled=!1,i.msImageSmoothingEnabled=!1,i.imageSmoothingEnabled=!1,i.setTransform(t,0,0,t,.5*(a.width-n.width*t),0),i.drawImage(n,0,0),s){i.beginPath(),i.moveTo(-200,-200),i.lineTo(v+200,-200),i.lineTo(v+200,c+200),i.lineTo(-200,c+200),i.lineTo(-200,-200);for(var D=.5;D<c;++D)for(var C=.5;C<v;++C)i.moveTo(C+.175,D),i.arc(C,D,.175,0,2*Math.PI,!0);i.fill(),i.strokeStyle="rgba(255, 255, 255, 0.075)",i.lineWidth=1/t,i.stroke()}l.render(i,t),W(e)}var n=document.createElement("canvas"),o=r(n),a=document.getElementById("game"),i=a.getContext("2d",{alpha:!1}),f=[[0,60,80,60,80,0,0,0]],h=[t()];h[0].color={r:128,g:0,b:255},h[0].subpaths.push([]);for(var u=0;u<3600;++u)h[0].subpaths[0].push(30*Math.cos(u*Math.PI/1800)+40,30*Math.sin(u*Math.PI/1800)+30);var l=g(h),s=!1,v=80,c=60;W(e);var p=0,d=0,m=!1,b=!1,y=!1;window.addEventListener("mousemove",function(e){p=e.clientX,d=e.clientY}),window.addEventListener("mousedown",function(e){m=!0}),window.addEventListener("mouseup",function(e){m=!1,b=!0});var w=[];window.addEventListener("keydown",function(e){w.push(e.key),"Shift"===e.key&&(y=!0)}),window.addEventListener("keyup",function(e){"Shift"===e.key&&(y=!1)})}}();